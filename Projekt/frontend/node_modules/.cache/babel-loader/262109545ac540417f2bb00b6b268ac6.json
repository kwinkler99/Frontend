{"ast":null,"code":"import { combineReducers } from 'redux';\nconst initialState = {\n  data: [],\n  category: [],\n  price: 0\n};\n\nfunction arrangement(data) {\n  const response = data.map(item => {\n    const {\n      id,\n      brand,\n      name,\n      price,\n      currency,\n      image_link,\n      description,\n      category,\n      product_types,\n      product_colors,\n      tag_list,\n      active,\n      comments\n    } = item; //unique colors\n\n    const result = Array.from(new Set(product_colors.map(s => s.colour_name))).map(colour_name => {\n      return {\n        colour_name: colour_name,\n        hex_value: product_colors.find(s => s.colour_name === colour_name).hex_value\n      };\n    }); //save product\n\n    const product = {\n      id: id,\n      brand: brand,\n      name: name,\n      price: parseFloat(price) || 0,\n      currency: currency,\n      image_link: image_link,\n      description: description,\n      category: category || \"others\",\n      product_types: product_types || \"others\",\n      product_colors: result,\n      tag_list: tag_list,\n      active: active,\n      comments: comments\n    };\n    return product;\n  });\n  return response;\n}\n\nfunction takeCategory(data) {\n  const category = [...new Set(data.map(item => item.category))].filter(i => i);\n  return [...category, \"others\", \"all\"];\n}\n\nconst sortBy = key => {\n  return (a, b) => a[key] > b[key] ? 1 : b[key] > a[key] ? -1 : 0;\n};\n\nconst products = (state = initialState, action) => {\n  switch (action.type) {\n    case 'GET_DATA':\n      return { ...state,\n        data: arrangement(action.payload),\n        category: takeCategory(action.payload),\n        price: Math.max(...action.payload.map(item => item.price))\n      };\n\n    case 'SORT_DATA':\n      const sortItem = action.payload.sort;\n      const data = arrangement(action.payload.data);\n      const filterByText = data.filter(item => item.name.toLowerCase().startsWith(sortItem.text.toLowerCase()));\n      const filterByCategory = filterByText.filter(item => item.category.startsWith(...sortItem.check.filter(a => a === item.category)));\n      let sortData = [];\n\n      if (sortItem.sort === \"reverse\") {\n        sortData = filterByCategory.concat().sort(sortBy([\"name\"])).reverse();\n      } else {\n        sortData = filterByCategory.concat().sort(sortBy([sortItem.sort]));\n      }\n\n      const filterByPrice = sortData.filter(item => sortItem.from < item.price && item.price < sortItem.to);\n      return { ...state,\n        data: filterByPrice\n      };\n\n    case 'EDIT_PRODUCT':\n      return { ...state,\n        data: arrangement(action.payload)\n      };\n\n    case 'EDIT_DONE':\n      return { ...state,\n        data: arrangement(action.payload)\n      };\n\n    case 'DELETE_PRODUCT':\n      return { ...state,\n        data: arrangement(action.payload)\n      };\n\n    case 'ADD_PRODUCT':\n      return { ...state,\n        data: arrangement(action.payload)\n      };\n\n    case 'DELETE_ALL_PRODUCT_SUCCESS':\n      return { ...state,\n        data: arrangement(action.payload)\n      };\n\n    case 'REQUEST':\n      return state;\n\n    case 'FAILURE':\n      console.log(\"Error\");\n      return state;\n\n    default:\n      return state;\n  }\n};\n\nconst initialProductState = {\n  product: {\n    product_colors: []\n  }\n};\n\nconst product = (state = initialProductState, action) => {\n  switch (action.type) {\n    case 'GET_PRODUCT':\n      return { ...state,\n        product: arrangement(action.payload)[0]\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default combineReducers({\n  products,\n  product\n});","map":{"version":3,"sources":["/home/kasia/inf/Front2/winkler-katarzyna/Projekt/frontend/src/Reducers/reducers.js"],"names":["combineReducers","initialState","data","category","price","arrangement","response","map","item","id","brand","name","currency","image_link","description","product_types","product_colors","tag_list","active","comments","result","Array","from","Set","s","colour_name","hex_value","find","product","parseFloat","takeCategory","filter","i","sortBy","key","a","b","products","state","action","type","payload","Math","max","sortItem","sort","filterByText","toLowerCase","startsWith","text","filterByCategory","check","sortData","concat","reverse","filterByPrice","to","console","log","initialProductState"],"mappings":"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","sourcesContent":["import { combineReducers } from 'redux'\n\n\nconst initialState = {\n    data:[],\n    category: [],\n    price: 0\n}\n\nfunction arrangement(data){\n    const response = data.map(item => {\n        const {id, brand, name, price, currency, image_link, description, category, product_types, product_colors, tag_list, active, comments} = item\n        \n        //unique colors\n        const result = Array.from(new Set(product_colors.map(s => s.colour_name)))\n            .map(colour_name => {\n                return {\n                    colour_name: colour_name,\n                    hex_value: product_colors.find(s => s.colour_name === colour_name).hex_value\n                }\n            });\n        \n        //save product\n        const product = {\n            id: id,\n            brand: brand,\n            name: name,\n            price: parseFloat(price) || 0,\n            currency: currency,\n            image_link: image_link,\n            description: description,\n            category: category || \"others\",\n            product_types: product_types || \"others\",\n            product_colors: result,\n            tag_list: tag_list,\n            active: active,\n            comments: comments\n        }\n        return product\n    })\n    return response\n}\n\nfunction takeCategory(data){\n    const category = [...new Set(data.map((item) => item.category))].filter(\n        (i) => i\n    )\n    return [...category, \"others\", \"all\"]\n}\n\nconst sortBy = (key) => {\n    return (a, b) => (a[key] > b[key]) ? 1 : ((b[key] > a[key]) ? -1 : 0);\n};\n\n\n\nconst products = (state = initialState, action) => {\n    switch (action.type){\n        case 'GET_DATA':\n            return {\n                ...state,\n                data: arrangement(action.payload),\n                category: takeCategory(action.payload),\n                price: Math.max(...action.payload.map(item => item.price))\n            }\n\n        case 'SORT_DATA':\n            const sortItem = action.payload.sort \n            const data = arrangement(action.payload.data)\n            const filterByText = data.filter(item => item.name.toLowerCase().startsWith(sortItem.text.toLowerCase()))\n            const filterByCategory = filterByText.filter(item => item.category.startsWith(...sortItem.check.filter(a => a === item.category))) \n            let sortData = []\n            if(sortItem.sort === \"reverse\"){\n                sortData = filterByCategory.concat().sort(sortBy([\"name\"])).reverse()\n            }\n            else{\n                sortData = filterByCategory.concat().sort(sortBy([sortItem.sort]))\n            }\n            const filterByPrice = sortData.filter(item => sortItem.from < item.price && item.price < sortItem.to)\n\n            return {\n                ...state,\n                data: filterByPrice\n            }\n\n        case 'EDIT_PRODUCT':\n            return {\n                ...state,\n                data: arrangement(action.payload)\n            }\n\n        case 'EDIT_DONE':\n            return {\n                ...state,\n                data: arrangement(action.payload)\n            }\n\n        case 'DELETE_PRODUCT':\n            return {\n                ...state,\n                data: arrangement(action.payload)\n            }\n        \n        case 'ADD_PRODUCT':\n            return {\n                ...state,\n                data: arrangement(action.payload)\n            }\n\n        case 'DELETE_ALL_PRODUCT_SUCCESS':\n            return {\n                ...state,\n                data: arrangement(action.payload)\n            }\n        \n        case 'REQUEST':\n            return state\n\n        case 'FAILURE':\n            console.log(\"Error\")\n            return state\n\n        default:\n            return state;\n    }\n}\n\n\nconst initialProductState = {\n    product: {\n        product_colors: []\n    }\n}\n\n\nconst product = (state = initialProductState, action) => {\n    switch(action.type){\n        case 'GET_PRODUCT':\n            return {\n                ...state,\n                product: arrangement(action.payload)[0],\n            };\n    \n        default:\n            return state\n    }\n\n}\n\n\n\nexport default combineReducers({ products, product })"]},"metadata":{},"sourceType":"module"}